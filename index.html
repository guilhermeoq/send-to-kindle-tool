<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Send to Kindle Fixer</title>
    <script src="https://unpkg.com/@zip.js/zip.js@2.6.12/dist/zip.min.js"></script>
    <script src="https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/images/site.webmanifest">
</head>

<bodys>
    <div class="col-lg-8 mx-auto p-4 py-md-5">
        <header class="d-flex align-items-center pb-3 mb-5 border-bottom">
            <img src="/images/icon.png">
            <a href="#" class="d-flex align-items-center text-body-emphasis text-decoration-none">
                <svg class="bi me-2" width="40" height="32">
                    <use xlink:href="#bootstrap" />
                </svg>
                <span class="fs-4">Send to Kindle Fixer</span>
            </a>
        </header>

        <main>
            <h1 class="text-body-emphasis">Select your EPUB</h1>
            <div class="fs-5 col-md-8">
                <form>
                    <p>Choose one or more '.epub' files to fix encoding:</p>
                    <input id="file" class="form-control" type="file" accept=".epub" multiple>
                </form>
            </div>

            <div id="main_status" style="display:none;margin:1em 0"></div>
            <br>
            <div id="loading" class="spinner-border" style="display:none;" role="status"></div>

            <button id="btnDlAll" style="display:none;margin:1em 0">Download all as zip</button>
            <div id="output"></div>
            <hr class="col-3 col-md-2 mb-5">

            <div class="row g-5">
                <div class="col-md-6">
                    <h2 class="text-body-emphasis">About</h2>
                    <p>When using the <a href="https://www.amazon.com/sendtokindle" target="_blank">Send to Kindle</a>
                        service to send .epub documents to your Kindle, you may encounter encoding issues in the file
                        converted by Amazon. This happens because not every .epub file comes with the encoding
                        information embedded. When this happens, Amazon assumes that the uploaded file is encoded with
                        ISO-8859-1 and causes artifacts in the content, for example: â€œ.</p>
                    <p><strong>Keep a copy of your original file: </strong>this utility may not be able to resolve the
                        issue.</p>
                    <p><strong>Privacy: </strong>This utility does not have access to your files. All processing takes
                        place in your browser.</p>
                    <p><strong>What does this utility do?</strong></p>
                    <ul>
                        <li>
                             
                        </li>
                        <li>
                            Fix hyperlink problem (result in Amazon rejecting the EPUB) when NCX table of content link
                            to
                            <body> with ID hash.
                        </li>
                        <li>
                            Detect invalid and/or missing language tag in metadata, and prompt user to select new
                            language.
                        </li>
                        <li>
                            Remove stray <img> tags with no source field.
                        </li>
                    </ul>
                </div>

                <div class="col-md-6">
                    <h2 class="text-body-emphasis">What next?</h2>
                    <p>Go to <a href="https://www.amazon.com/sendtokindle" target="_blank">Send to Kindle</a> and check
                        if the problem is resolved.</p>
                </div>
            </div>
        </main>
        <footer class="pt-5 my-5 text-body-secondary border-top">
            <p>Available at <a href="https://github.com/guilhermeoq/send-to-kindle-fixer">GitHub</a></p>
            <a href="https://github.com/guilhermeoq/send-to-kindle-fixer">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path
                        d="M12 .3c-6.63 0-12 5.37-12 12 0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.385-1.333-1.755-1.333-1.755-1.09-.745.083-.73.083-.73 1.205.085 1.838 1.236 1.838 1.236 1.07 1.836 2.805 1.305 3.495.998.11-.776.417-1.305.76-1.605-2.665-.305-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.306-.54-1.526.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.4 3-.405 1.02.005 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.65.24 2.87.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.62-5.475 5.92.435.36.82 1.096.82 2.22 0 1.605-.015 2.895-.015 3.285 0 .315.21.69.825.57 4.77-1.585 8.2-6.086 8.2-11.387-.005-6.63-5.375-12.005-12.005-12.005" />
                </svg>
            </a>
        </footer>
    </div>
    <script src="/scripts/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
</body>

</html>
